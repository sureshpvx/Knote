<%# app/views/users/registrations/new.html.erb %>
<%= turbo_frame_tag "modal" do %>
  <div class="bg-white rounded-lg p-8 w-full max-w-md mx-auto">
    <%# Form Header %>
    <div class="text-center mb-8">
      <h2 class="text-3xl font-bold text-black">Create an Account</h2>
      <p class="text-gray-500 mt-2">Join to start capturing your ideas.</p>
    </div>

    <%= form_for(resource, as: resource_name, url: registration_path(resource_name)) do |f| %>
      <%= render "users/shared/error_messages", resource: resource %>

      <div class="space-y-6">
        <%# Email Field %>
        <div>
          <%= f.label :email, class: "block text-sm font-medium text-gray-700 mb-2" %>
          <div class="relative">
            <div class="pointer-events-none absolute inset-y-0 left-0 flex items-center pl-4">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-400" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" d="M21.75 6.75v10.5a2.25 2.25 0 01-2.25 2.25h-15a2.25 2.25 0 01-2.25-2.25V6.75m19.5 0A2.25 2.25 0 0019.5 4.5h-15a2.25 2.25 0 00-2.25 2.25m19.5 0v.243a2.25 2.25 0 01-1.07 1.916l-7.5 4.615a2.25 2.25 0 01-2.36 0L3.32 8.91a2.25 2.25 0 01-1.07-1.916V6.75" />
              </svg>
            </div>
            <%= f.email_field :email, autofocus: true, autocomplete: "email",
                              class: "block w-full rounded-md border-gray-300 py-3 pl-12 shadow-sm focus:border-black focus:ring-black text-base",
                              placeholder: "you@example.com" %>
          </div>
        </div>

        <%# Password Field %>
        <div>
          <%= f.label :password, class: "block text-sm font-medium text-gray-700 mb-2" %>
          <div class="relative">
            <div class="pointer-events-none absolute inset-y-0 left-0 flex items-center pl-4">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-400" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" d="M16.5 10.5V6.75a4.5 4.5 0 10-9 0v3.75m-.75 11.25h10.5a2.25 2.25 0 002.25-2.25v-6.75a2.25 2.25 0 00-2.25-2.25H6.75a2.25 2.25 0 00-2.25 2.25v6.75a2.25 2.25 0 002.25 2.25z" />
              </svg>
            </div>
            <%= f.password_field :password, autocomplete: "new-password",
                                 class: "block w-full rounded-md border-gray-300 py-3 pl-12 shadow-sm focus:border-black focus:ring-black text-base",
                                 placeholder: "••••••••" %>
          </div>
          <% if @minimum_password_length %>
            <p class="mt-2 text-xs text-gray-500">(<%= @minimum_password_length %> characters minimum)</p>
          <% end %>
        </div>

        <%# Password Confirmation Field %>
        <div>
          <%= f.label :password_confirmation, class: "block text-sm font-medium text-gray-700 mb-2" %>
          <div class="relative">
            <div class="pointer-events-none absolute inset-y-0 left-0 flex items-center pl-4">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-400" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" d="M16.5 10.5V6.75a4.5 4.5 0 10-9 0v3.75m-.75 11.25h10.5a2.25 2.25 0 002.25-2.25v-6.75a2.25 2.25 0 00-2.25-2.25H6.75a2.25 2.25 0 00-2.25 2.25v6.75a2.25 2.25 0 002.25 2.25z" />
              </svg>
            </div>
            <%= f.password_field :password_confirmation, autocomplete: "new-password",
                                 class: "block w-full rounded-md border-gray-300 py-3 pl-12 shadow-sm focus:border-black focus:ring-black text-base",
                                 placeholder: "••••••••" %>
          </div>
        </div>
      </div>

      <%# Submit Button %>
      <div class="mt-8">
        <%= f.submit "Sign up", class: "w-full cursor-pointer rounded-md bg-black px-4 py-3 text-sm font-semibold text-white shadow-sm hover:bg-gray-800 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-black" %>
      </div>
    <% end %>

    <%# Shared Links (Sign in, etc.) %>
    <div class="mt-6 text-center text-sm">
      <%= render "users/shared/links" %>
    </div>
  </div>
<% end %>